<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content=""><title>Occurrence Counts — count_occurrences • tern</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Occurrence Counts — count_occurrences"><meta property="og:description" content=""><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tern</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/tern.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/generate_tern_data.html">Example Data Generation</a>
    <a class="dropdown-item" href="../articles/tables.html">Tabulation</a>
    <a class="dropdown-item" href="../articles/tern_formats.html">Formatting Functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4-rc1">v0.8.4-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc2">v0.8.3-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc1">v0.8.3-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc2">v0.8.2-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc1">v0.8.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.10">v0.7.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4">v0.8.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2">v0.8.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.1">v0.8.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.0">v0.8.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.9">v0.7.9</a> </div></li>
<!-- end dropdown for versions -->
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Occurrence Counts</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/tern/blob/HEAD/R/count_occurrences.R" class="external-link"><code>R/count_occurrences.R</code></a></small>
      <div class="d-none name"><code>count_occurrences.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">s_count_occurrences</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N_col"</span>, <span class="st">"n"</span><span class="op">)</span>,</span>
<span>  <span class="va">.N_col</span>,</span>
<span>  <span class="va">.df_row</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .var <span class="op">=</span> <span class="st">"MHDECOD"</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"USUBJID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">a_count_occurrences</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N_col"</span>, <span class="st">"n"</span><span class="op">)</span>,</span>
<span>  <span class="va">.N_col</span>,</span>
<span>  <span class="va">.df_row</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .var <span class="op">=</span> <span class="st">"MHDECOD"</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"USUBJID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">count_occurrences</span><span class="op">(</span></span>
<span>  <span class="va">lyt</span>,</span>
<span>  <span class="va">vars</span>,</span>
<span>  var_labels <span class="op">=</span> <span class="va">vars</span>,</span>
<span>  show_labels <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  table_names <span class="op">=</span> <span class="va">vars</span>,</span>
<span>  .stats <span class="op">=</span> <span class="st">"count_fraction"</span>,</span>
<span>  .formats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .indent_mods <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>(<code>data.frame</code>)<br> data set containing all analysis variables.</p></dd>


<dt>denom</dt>
<dd><p>(<code>string</code>)<br> choice of denominator for patient proportions. Can be:</p><ul><li><p><code>N_col</code>: total number of patients in this column across rows</p></li>
<li><p><code>n</code>: number of patients with any occurrences</p></li>
</ul></dd>


<dt>.N_col</dt>
<dd><p>(<code>count</code>)<br> row-wise N (row group count) for the group of observations being analyzed
(i.e. with no column-based subsetting) that is passed by <code>rtables</code>.</p></dd>


<dt>.df_row</dt>
<dd><p>(<code>data.frame</code>)<br> data frame across all of the columns for the given row split.</p></dd>


<dt>drop</dt>
<dd><p>(<code>flag</code>)<br> should non appearing occurrence levels be dropped from the resulting table.
Note that in that case the remaining occurrence levels in the table are sorted alphabetically.</p></dd>


<dt>.var</dt>
<dd><p>(<code>string</code>)<br> single variable name that is passed by <code>rtables</code> when requested
by a statistics function.</p></dd>


<dt>id</dt>
<dd><p>(<code>string</code>)<br> subject variable name.</p></dd>


<dt>lyt</dt>
<dd><p>(<code>layout</code>)<br> input layout where analyses will be added to.</p></dd>


<dt>vars</dt>
<dd><p>(<code>character</code>)<br> variable names for the primary analysis variable to be iterated over.</p></dd>


<dt>var_labels</dt>
<dd><p>character for label.</p></dd>


<dt>show_labels</dt>
<dd><p>label visibility: one of "default", "visible" and "hidden".</p></dd>


<dt>...</dt>
<dd><p>additional arguments for the lower level functions.</p></dd>


<dt>table_names</dt>
<dd><p>(<code>character</code>)<br> this can be customized in case that the same <code>vars</code> are analyzed multiple times,
to avoid warnings from <code>rtables</code>.</p></dd>


<dt>.stats</dt>
<dd><p>(<code>character</code>)<br> statistics to select for the table.</p></dd>


<dt>.formats</dt>
<dd><p>(named <code>character</code> or <code>list</code>)<br> formats for the statistics.</p></dd>


<dt>.labels</dt>
<dd><p>(named <code>character</code>)<br> labels for the statistics (without indent).</p></dd>


<dt>.indent_mods</dt>
<dd><p>(named <code>integer</code>)<br> indent modifiers for the labels.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with:</p><dl><dt>count</dt>
<dd><p>list of counts with one element per occurrence.</p></dd>

<dt>count_fraction</dt>
<dd><p>list of counts and fractions with one element per occurrence.</p></dd>

<dt>fraction</dt>
<dd><p>list of numerators and denominators with one element per occurrence.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Functions for analyzing frequencies and fractions of occurrences for patients with occurrence
data. Primary analysis variables are the dictionary terms. All occurrences are counted for total
counts. Multiple occurrences within patient at the lowest term level displayed in the table are
counted only once. Note that by default occurrences which don't appear in a given row split
are dropped from the table and the occurrences in the table are sorted alphabetically per row split.
Therefore the corresponding layout needs to use <code>split_fun = drop_split_levels</code> in the <code>split_rows_by</code>
calls. Use <code>drop = FALSE</code> if you would like to show all occurrences.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>s_count_occurrences()</code>: Statistics function which counts number of patients that report an
occurrence.</p></li>
<li><p><code>a_count_occurrences()</code>: Formatted Analysis function which can be further customized by calling
<code><a href="https://rdrr.io/pkg/rtables/man/make_afun.html" class="external-link">rtables::make_afun()</a></code> on it. It is used as <code>afun</code> in <code><a href="https://rdrr.io/pkg/rtables/man/analyze.html" class="external-link">rtables::analyze()</a></code>.</p></li>
<li><p><code>count_occurrences()</code>: Analyze Function that counts occurrences as part of <code>rtables</code> layouts.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  MHDECOD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MH1"</span>, <span class="st">"MH2"</span>, <span class="st">"MH1"</span>, <span class="st">"MH1"</span>, <span class="st">"MH1"</span>, <span class="st">"MH3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">N_per_col</span> <span class="op">&lt;-</span> <span class="fl">4L</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Count unique occurrences per subject.</span></span></span>
<span class="r-in"><span><span class="fu">s_count_occurrences</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">df</span>,</span></span>
<span class="r-in"><span>  .N_col <span class="op">=</span> <span class="va">N_per_col</span>,</span></span>
<span class="r-in"><span>  .df_row <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  .var <span class="op">=</span> <span class="st">"MHDECOD"</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="st">"USUBJID"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count$MH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count$MH2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count$MH3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count_fraction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count_fraction$MH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3.00 0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count_fraction$MH2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.00 0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $count_fraction$MH3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.00 0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fraction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fraction$MH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num denom </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3     4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fraction$MH2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num denom </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fraction$MH3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   num denom </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#  We need to ungroup `count_fraction` first so that the `rtables` formatting</span></span></span>
<span class="r-in"><span><span class="co"># function `format_count_fraction()` can be applied correctly.</span></span></span>
<span class="r-in"><span><span class="va">afun</span> <span class="op">&lt;-</span> <span class="fu">make_afun</span><span class="op">(</span><span class="va">a_count_occurrences</span>, .ungroup_stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"count_fraction"</span>, <span class="st">"fraction"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">afun</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">df</span>,</span></span>
<span class="r-in"><span>  .N_col <span class="op">=</span> <span class="va">N_per_col</span>,</span></span>
<span class="r-in"><span>  .df_row <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  .var <span class="op">=</span> <span class="st">"MHDECOD"</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="st">"USUBJID"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RowsVerticalSection (in_rows) object print method:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   row_name formatted_cell indent_mod row_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      MH1              3          0       MH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      MH2              1          0       MH2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      MH3              1          0       MH3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      MH1      3 (75.0%)          0       MH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      MH2      1 (25.0%)          0       MH2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      MH3      1 (25.0%)          0       MH3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      MH1    3/4 (75.0%)          0       MH1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      MH2    1/4 (25.0%)          0       MH2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      MH3    1/4 (25.0%)          0       MH3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    <span class="fl">6</span>, <span class="fl">6</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">8</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  MHDECOD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"MH1"</span>, <span class="st">"MH2"</span>, <span class="st">"MH1"</span>, <span class="st">"MH1"</span>, <span class="st">"MH1"</span>, <span class="st">"MH3"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"MH2"</span>, <span class="st">"MH2"</span>, <span class="st">"MH3"</span>, <span class="st">"MH1"</span>, <span class="st">"MH2"</span>, <span class="st">"MH4"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  ARM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_adsl</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">ARM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create table layout</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu">basic_table</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">add_colcounts</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">count_occurrences</span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"MHDECOD"</span>, .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_fraction"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply table layout to data and produce `rtable` object</span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">build_table</span><span class="op">(</span><span class="va">df</span>, alt_counts_df <span class="op">=</span> <span class="va">df_adsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">prune_table</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           A           B    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         (N=3)       (N=3)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ———————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MH1   3 (100%)    1 (33.3%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MH2   1 (33.3%)   2 (66.7%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MH3   1 (33.3%)   1 (33.3%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MH4       0       1 (33.3%)</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>tern is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>

  

  

  </body></html>

