<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Family of constructor and condition functions to flexibly prune occurrence tables.
The condition functions always return whether the row result is higher than the threshold.
Since they are of class CombinationFunction() they can be logically combined with other condition
functions."><title>Occurrence Table Pruning — prune_occurrences • tern</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Occurrence Table Pruning — prune_occurrences"><meta property="og:description" content="
Family of constructor and condition functions to flexibly prune occurrence tables.
The condition functions always return whether the row result is higher than the threshold.
Since they are of class CombinationFunction() they can be logically combined with other condition
functions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tern</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.10</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/tern.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tables.html">Tabulation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2-rc1">v0.9.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1-rc3">v0.9.1-rc3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc2">v0.8.5-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc1">v0.8.5-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4-rc1">v0.8.4-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc2">v0.8.3-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc1">v0.8.3-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc2">v0.8.2-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc1">v0.8.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.10">v0.7.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.5">v0.9.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.4">v0.9.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.3">v0.9.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2">v0.9.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1">v0.9.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.0">v0.9.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5">v0.8.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4">v0.8.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2">v0.8.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.1">v0.8.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.0">v0.8.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.9">v0.7.9</a> </div></li>
<!-- end dropdown for versions -->
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Occurrence Table Pruning</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/tern/blob/HEAD/R/prune_occurrences.R" class="external-link"><code>R/prune_occurrences.R</code></a></small>
      <div class="d-none name"><code>prune_occurrences.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Family of constructor and condition functions to flexibly prune occurrence tables.
The condition functions always return whether the row result is higher than the threshold.
Since they are of class <code><a href="combination_function.html">CombinationFunction()</a></code> they can be logically combined with other condition
functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">keep_rows</span><span class="op">(</span><span class="va">row_condition</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">keep_content_rows</span><span class="op">(</span><span class="va">content_row_condition</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_count_in_cols</span><span class="op">(</span><span class="va">atleast</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_count_in_any_col</span><span class="op">(</span><span class="va">atleast</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_fraction_in_cols</span><span class="op">(</span><span class="va">atleast</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_fraction_in_any_col</span><span class="op">(</span><span class="va">atleast</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_fractions_difference</span><span class="op">(</span><span class="va">atleast</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_counts_difference</span><span class="op">(</span><span class="va">atleast</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>row_condition</dt>
<dd><p>(<code>CombinationFunction</code>)<br> condition function which works on individual
analysis rows and flags whether these should be kept in the pruned table.</p></dd>


<dt>content_row_condition</dt>
<dd><p>(<code>CombinationFunction</code>)<br> condition function which works on individual
first content rows of leaf tables and flags whether these leaf tables should be kept in the pruned table.</p></dd>


<dt>atleast</dt>
<dd><p>(<code>count</code> or <code>proportion</code>)<br> threshold which should be met in order to
keep the row.</p></dd>


<dt>...</dt>
<dd><p>arguments for row or column access, see <code><a href="rtables_access.html">rtables_access</a></code>: either
<code>col_names</code> (<code>character</code>) including the names of the columns which should be used,
or alternatively <code>col_indices</code> (<code>integer</code>) giving the indices directly instead.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>keep_rows()</code> returns a pruning function that can be used with <code><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">rtables::prune_table()</a></code></p>


<p>on <code>[rtables::TableTree()]</code> objects.</p>


<p><code>keep_content_rows()</code> also returns a pruning function, the difference is that it
checks the condition on the first content row of leaf tables in the table.</p>


<p><code>has_count_in_cols()</code> returns a condition function that sums the counts in the specified
column.</p>


<p><code>has_count_in_any_col()</code> returns a condition function that compares the counts in the
specified columns with the threshold.</p>


<p><code>has_fraction_in_cols()</code> returns a condition function that sums the counts in the
specified column, and computes the fraction by dividing by the total column counts.</p>


<p><code>has_fraction_in_cols()</code> returns a condition function that looks at the fractions
in the specified columns and checks whether any of them fulfill the threshold.</p>


<p><code>has_fractions_difference()</code> returns a condition function that extracts the fractions of each
specified column, and computes the difference of the minimum and maximum.</p>


<p><code>has_counts_difference()</code> returns a condition function that extracts the counts of each
specified column, and computes the difference of the minimum and maximum.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>keep_rows()</code>: constructor for creating pruning functions based on
a row condition function. This removes all analysis rows (<code>TableRow</code>) that should be
pruned, i.e., don't fulfill the row condition. It removes the sub tree if there are no
children left.</p></li>
<li><p><code>keep_content_rows()</code>: constructor for creating pruning functions based on
a condition for the (first) content row in leaf tables. This removes all leaf tables where
the first content row does not fulfill the condition. It does not check individual rows.
It then proceeds recursively by removing the sub tree if there are no children left.</p></li>
<li><p><code>has_count_in_cols()</code>: constructor for creating condition functions on total counts in
the specified columns.</p></li>
<li><p><code>has_count_in_any_col()</code>: constructor for creating condition functions on any of the counts in
the specified columns satisfying a threshold.</p></li>
<li><p><code>has_fraction_in_cols()</code>: constructor for creating condition functions on total fraction in
the specified columns.</p></li>
<li><p><code>has_fraction_in_any_col()</code>: constructor for creating condition functions on any fraction in
the specified columns.</p></li>
<li><p><code>has_fractions_difference()</code>: constructor for creating condition function that checks the difference
between the fractions reported in each specified column.</p></li>
<li><p><code>has_counts_difference()</code>: constructor for creating condition function that checks the difference
between the counts reported in each specified column.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Since most table specifications are worded positively, we name our constructor and condition
functions positively, too. However, note that the result of <code>keep_rows()</code> says what
should be pruned though, to conform with the <code><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">rtables::prune_table()</a></code> interface.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://roche.github.io/rtables/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://roche.github.io/rtables/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://roche.github.io/rtables/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://roche.github.io/rtables/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"STRATA1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://roche.github.io/rtables/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="summarize_variables.html">summarize_vars</a></span><span class="op">(</span><span class="st">"COUNTRY"</span>, .stats <span class="op">=</span> <span class="st">"count_fraction"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://roche.github.io/rtables/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">DM</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># `keep_rows`</span></span></span>
<span class="r-in"><span><span class="va">is_non_empty</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="fu"><a href="combination_function.html">CombinationFunction</a></span><span class="op">(</span><span class="va">all_zero_or_na</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">is_non_empty</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># `keep_content_rows`</span></span></span>
<span class="r-in"><span><span class="co"># Internal function - has_count_in_cols</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">more_than_twenty</span> <span class="op">&lt;-</span> <span class="fu">has_count_in_cols</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">20L</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_content_rows</span><span class="op">(</span><span class="va">more_than_twenty</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Internal function - has_count_in_cols</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">more_than_one</span> <span class="op">&lt;-</span> <span class="fu">has_count_in_cols</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">1L</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">more_than_one</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># `has_count_in_any_col`</span></span></span>
<span class="r-in"><span><span class="va">any_more_than_one</span> <span class="op">&lt;-</span> <span class="fu">has_count_in_any_col</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">1L</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">any_more_than_one</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># `has_fraction_in_cols`</span></span></span>
<span class="r-in"><span><span class="va">more_than_five_percent</span> <span class="op">&lt;-</span> <span class="fu">has_fraction_in_cols</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">0.05</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">more_than_five_percent</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># `has_fraction_in_any_col`</span></span></span>
<span class="r-in"><span><span class="va">any_atleast_five_percent</span> <span class="op">&lt;-</span> <span class="fu">has_fraction_in_any_col</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">0.05</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">more_than_five_percent</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># `has_fractions_difference`</span></span></span>
<span class="r-in"><span><span class="va">more_than_five_percent_diff</span> <span class="op">&lt;-</span> <span class="fu">has_fractions_difference</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">0.05</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">more_than_five_percent_diff</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># Internal function - has_counts_difference</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">more_than_one_diff</span> <span class="op">&lt;-</span> <span class="fu">has_counts_difference</span><span class="op">(</span>atleast <span class="op">=</span> <span class="fl">1L</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://roche.github.io/rtables/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">tab</span>, <span class="fu">keep_rows</span><span class="op">(</span><span class="va">more_than_one_diff</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>tern is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>

  

  

  </body></html>

