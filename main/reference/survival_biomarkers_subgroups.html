<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tabulate biomarker effects on survival by subgroup — survival_biomarkers_subgroups • tern</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tabulate biomarker effects on survival by subgroup — survival_biomarkers_subgroups"><meta name="description" content="
The tabulate_survival_biomarkers() function creates a layout element to tabulate the estimated effects of multiple
continuous biomarker variables on survival across subgroups, returning statistics including median survival time and
hazard ratio for each population subgroup. The table is created from df, a list of data frames returned by
extract_survival_biomarkers(), with the statistics to include specified via the vars parameter.
A forest plot can be created from the resulting table using the g_forest() function."><meta property="og:description" content="
The tabulate_survival_biomarkers() function creates a layout element to tabulate the estimated effects of multiple
continuous biomarker variables on survival across subgroups, returning statistics including median survival time and
hazard ratio for each population subgroup. The table is created from df, a list of data frames returned by
extract_survival_biomarkers(), with the statistics to include specified via the vars parameter.
A forest plot can be created from the resulting table using the g_forest() function."><meta property="og:image" content="https://insightsengineering.github.io/tern/logo.png"><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tern</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.6.9008</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tern.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/missing_values.html">Missing Values in Tern</a></li>
    <li><a class="dropdown-item" href="../articles/tables.html">Tabulation</a></li>
    <li><a class="dropdown-item" href="../articles/tern_formats.html">Formatting Functions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2-rc1">v0.9.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1-rc3">v0.9.1-rc3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc2">v0.8.5-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc1">v0.8.5-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4-rc1">v0.8.4-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc2">v0.8.3-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc1">v0.8.3-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc2">v0.8.2-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc1">v0.8.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.10">v0.7.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.6">v0.9.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.5">v0.9.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.4">v0.9.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.3">v0.9.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2">v0.9.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1">v0.9.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.0">v0.9.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5">v0.8.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4">v0.8.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2">v0.8.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.1">v0.8.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.0">v0.8.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.9">v0.7.9</a> </div></li>
<!-- end dropdown for versions -->
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports"><li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/tern" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tabulate biomarker effects on survival by subgroup</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/tern/blob/main/R/survival_biomarkers_subgroups.R" class="external-link"><code>R/survival_biomarkers_subgroups.R</code></a></small>
      <div class="d-none name"><code>survival_biomarkers_subgroups.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>The <code>tabulate_survival_biomarkers()</code> function creates a layout element to tabulate the estimated effects of multiple
continuous biomarker variables on survival across subgroups, returning statistics including median survival time and
hazard ratio for each population subgroup. The table is created from <code>df</code>, a list of data frames returned by
<code><a href="extract_survival_biomarkers.html">extract_survival_biomarkers()</a></code>, with the statistics to include specified via the <code>vars</code> parameter.</p>
<p>A forest plot can be created from the resulting table using the <code><a href="g_forest.html">g_forest()</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tabulate_survival_biomarkers</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_tot"</span>, <span class="st">"n_tot_events"</span>, <span class="st">"median"</span>, <span class="st">"hr"</span>, <span class="st">"ci"</span>, <span class="st">"pval"</span><span class="op">)</span>,</span>
<span>  groups_lists <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="control_coxreg.html">control_coxreg</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  label_all <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  time_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na_str <span class="op">=</span> <span class="fu"><a href="default_na_str.html">default_na_str</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .indent_mods <span class="op">=</span> <span class="fl">0L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(<code>data.frame</code>)<br> containing all analysis variables, as returned by
<code><a href="extract_survival_biomarkers.html">extract_survival_biomarkers()</a></code>.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>(<code>character</code>)<br> the names of statistics to be reported among:</p><ul><li><p><code>n_tot_events</code>: Total number of events per group.</p></li>
<li><p><code>n_tot</code>: Total number of observations per group.</p></li>
<li><p><code>median</code>: Median survival time.</p></li>
<li><p><code>hr</code>: Hazard ratio.</p></li>
<li><p><code>ci</code>: Confidence interval of hazard ratio.</p></li>
<li><p><code>pval</code>: p-value of the effect.
Note, one of the statistics <code>n_tot</code> and <code>n_tot_events</code>, as well as both <code>hr</code> and <code>ci</code> are required.</p></li>
</ul></dd>


<dt id="arg-groups-lists">groups_lists<a class="anchor" aria-label="anchor" href="#arg-groups-lists"></a></dt>
<dd><p>(named <code>list</code> of <code>list</code>)<br> optionally contains for each <code>subgroups</code> variable a
list, which specifies the new group levels via the names and the
levels that belong to it in the character vectors that are elements of the list.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>(<code>list</code>)<br> a list of parameters as returned by the helper function <code><a href="control_coxreg.html">control_coxreg()</a></code>.</p></dd>


<dt id="arg-label-all">label_all<a class="anchor" aria-label="anchor" href="#arg-label-all"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a><br> please assign the <code>label_all</code> parameter within the
<code><a href="extract_survival_biomarkers.html">extract_survival_biomarkers()</a></code> function when creating <code>df</code>.</p></dd>


<dt id="arg-time-unit">time_unit<a class="anchor" aria-label="anchor" href="#arg-time-unit"></a></dt>
<dd><p>(<code>string</code>)<br> label with unit of median survival time. Default <code>NULL</code> skips displaying unit.</p></dd>


<dt id="arg-na-str">na_str<a class="anchor" aria-label="anchor" href="#arg-na-str"></a></dt>
<dd><p>(<code>string</code>)<br> string used to replace all <code>NA</code> or empty values in the output.</p></dd>


<dt id="arg--indent-mods">.indent_mods<a class="anchor" aria-label="anchor" href="#arg--indent-mods"></a></dt>
<dd><p>(named <code>integer</code>)<br> indent modifiers for the labels. Defaults to 0, which corresponds to the
unmodified default behavior. Can be negative.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>rtables</code> table summarizing biomarker effects on survival by subgroup.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These functions create a layout starting from a data frame which contains
the required statistics. The tables are then typically used as input for forest plots.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>tabulate_survival_biomarkers()</code>: Table-creating function which creates a table
summarizing biomarker effects on survival by subgroup.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>In contrast to <code><a href="survival_duration_subgroups.html">tabulate_survival_subgroups()</a></code> this tabulation function does
not start from an input layout <code>lyt</code>. This is because internally the table is
created by combining multiple subtables.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="h_survival_biomarkers_subgroups.html">h_tab_surv_one_biomarker()</a></code> which is used internally, <code><a href="extract_survival_biomarkers.html">extract_survival_biomarkers()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adtte</span> <span class="op">&lt;-</span> <span class="va">tern_ex_adtte</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Save variable labels before data processing steps.</span></span></span>
<span class="r-in"><span><span class="va">adtte_labels</span> <span class="op">&lt;-</span> <span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">adtte</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adtte_f</span> <span class="op">&lt;-</span> <span class="va">adtte</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"OS"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    AVALU <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">AVALU</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    is_event <span class="op">=</span> <span class="va">CNSR</span> <span class="op">==</span> <span class="fl">0</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVALU"</span> <span class="op">=</span> <span class="va">adtte_labels</span><span class="op">[[</span><span class="st">"AVALU"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"is_event"</span> <span class="op">=</span> <span class="st">"Event Flag"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">adtte_f</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">labels</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">labels</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Typical analysis of two continuous biomarkers `BMRKR1` and `AGE`,</span></span></span>
<span class="r-in"><span><span class="co"># in multiple regression models containing one covariate `RACE`,</span></span></span>
<span class="r-in"><span><span class="co"># as well as one stratification variable `STRATA1`. The subgroups</span></span></span>
<span class="r-in"><span><span class="co"># are defined by the levels of `BMRKR2`.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="extract_survival_biomarkers.html">extract_survival_biomarkers</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    tte <span class="op">=</span> <span class="st">"AVAL"</span>,</span></span>
<span class="r-in"><span>    is_event <span class="op">=</span> <span class="st">"is_event"</span>,</span></span>
<span class="r-in"><span>    biomarkers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BMRKR1"</span>, <span class="st">"AGE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    strata <span class="op">=</span> <span class="st">"STRATA1"</span>,</span></span>
<span class="r-in"><span>    covariates <span class="op">=</span> <span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>    subgroups <span class="op">=</span> <span class="st">"BMRKR2"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  label_all <span class="op">=</span> <span class="st">"Total Patients"</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">adtte_f</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   biomarker              biomarker_label n_tot n_tot_events   median        hr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    BMRKR1 Continuous Level Biomarker 1   200          141 753.5176 1.0010939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       AGE                          Age   200          141 753.5176 1.0106406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    BMRKR1 Continuous Level Biomarker 1    70           52 735.4722 0.9905065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       AGE                          Age    70           52 735.4722 1.0106279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    BMRKR1 Continuous Level Biomarker 1    68           42 858.9952 0.9623210</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       AGE                          Age    68           42 858.9952 1.0360765</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    BMRKR1 Continuous Level Biomarker 1    62           47 727.8043 1.0770946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       AGE                          Age    62           47 727.8043 1.0009890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         lcl      ucl conf_level      pval     pval_label       subgroup    var</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.9538978 1.050625       0.95 0.9646086 p-value (Wald) Total Patients    ALL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.9871004 1.034742       0.95 0.3787395 p-value (Wald) Total Patients    ALL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.9142220 1.073156       0.95 0.8155443 p-value (Wald)            LOW BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.9621192 1.061582       0.95 0.6735773 p-value (Wald)            LOW BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.8708694 1.063376       0.95 0.4509368 p-value (Wald)         MEDIUM BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.9727439 1.103532       0.95 0.2707796 p-value (Wald)         MEDIUM BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 0.9756250 1.189118       0.95 0.1412524 p-value (Wald)           HIGH BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 0.9678535 1.035259       0.95 0.9541048 p-value (Wald)           HIGH BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      var_label row_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               Total Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               Total Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 Continuous Level Biomarker 2 analysis</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Here we group the levels of `BMRKR2` manually.</span></span></span>
<span class="r-in"><span><span class="va">df_grouped</span> <span class="op">&lt;-</span> <span class="fu"><a href="extract_survival_biomarkers.html">extract_survival_biomarkers</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    tte <span class="op">=</span> <span class="st">"AVAL"</span>,</span></span>
<span class="r-in"><span>    is_event <span class="op">=</span> <span class="st">"is_event"</span>,</span></span>
<span class="r-in"><span>    biomarkers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BMRKR1"</span>, <span class="st">"AGE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    strata <span class="op">=</span> <span class="st">"STRATA1"</span>,</span></span>
<span class="r-in"><span>    covariates <span class="op">=</span> <span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>    subgroups <span class="op">=</span> <span class="st">"BMRKR2"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">adtte_f</span>,</span></span>
<span class="r-in"><span>  groups_lists <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    BMRKR2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"low"</span> <span class="op">=</span> <span class="st">"LOW"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"low/medium"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LOW"</span>, <span class="st">"MEDIUM"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"low/medium/high"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LOW"</span>, <span class="st">"MEDIUM"</span>, <span class="st">"HIGH"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_grouped</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   biomarker              biomarker_label n_tot n_tot_events   median        hr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    BMRKR1 Continuous Level Biomarker 1   200          141 753.5176 1.0010939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       AGE                          Age   200          141 753.5176 1.0106406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    BMRKR1 Continuous Level Biomarker 1    70           52 735.4722 0.9905065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       AGE                          Age    70           52 735.4722 1.0106279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    BMRKR1 Continuous Level Biomarker 1   138           94 777.8929 0.9801709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       AGE                          Age   138           94 777.8929 1.0236283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    BMRKR1 Continuous Level Biomarker 1   200          141 753.5176 1.0010939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       AGE                          Age   200          141 753.5176 1.0106406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         lcl      ucl conf_level      pval     pval_label        subgroup    var</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.9538978 1.050625       0.95 0.9646086 p-value (Wald)    All Patients    ALL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.9871004 1.034742       0.95 0.3787395 p-value (Wald)    All Patients    ALL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.9142220 1.073156       0.95 0.8155443 p-value (Wald)             low BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.9621192 1.061582       0.95 0.6735773 p-value (Wald)             low BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.9235465 1.040267       0.95 0.5094582 p-value (Wald)      low/medium BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.9859367 1.062761       0.95 0.2224475 p-value (Wald)      low/medium BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 0.9538978 1.050625       0.95 0.9646086 p-value (Wald) low/medium/high BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 0.9871004 1.034742       0.95 0.3787395 p-value (Wald) low/medium/high BMRKR2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      var_label row_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                 All Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                 All Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Continuous Level Biomarker 2 analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 Continuous Level Biomarker 2 analysis</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Table with default columns.</span></span></span>
<span class="r-in"><span><span class="fu">tabulate_survival_biomarkers</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Total n   Total Events   Median   Hazard Ratio   95% Wald CI    p-value (Wald)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ———————————————————————————————————————————————————————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Age                                                                                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Total Patients                   200         141        753.5        1.01       (0.99, 1.03)       0.3787    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Continuous Level Biomarker 2                                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     LOW                            70           52        735.5        1.01       (0.96, 1.06)       0.6736    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     MEDIUM                         68           42        859.0        1.04       (0.97, 1.10)       0.2708    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     HIGH                           62           47        727.8        1.00       (0.97, 1.04)       0.9541    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Continuous Level Biomarker 1                                                                                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Total Patients                   200         141        753.5        1.00       (0.95, 1.05)       0.9646    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Continuous Level Biomarker 2                                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     LOW                            70           52        735.5        0.99       (0.91, 1.07)       0.8155    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     MEDIUM                         68           42        859.0        0.96       (0.87, 1.06)       0.4509    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     HIGH                           62           47        727.8        1.08       (0.98, 1.19)       0.1413    </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Table with a manually chosen set of columns: leave out "pval", reorder.</span></span></span>
<span class="r-in"><span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu">tabulate_survival_biomarkers</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_tot_events"</span>, <span class="st">"ci"</span>, <span class="st">"n_tot"</span>, <span class="st">"median"</span>, <span class="st">"hr"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  time_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">adtte_f</span><span class="op">$</span><span class="va">AVALU</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Finally produce the forest plot.</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="g_forest.html">g_forest</a></span><span class="op">(</span><span class="va">tab</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="survival_biomarkers_subgroups-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>tern is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>





  </body></html>

