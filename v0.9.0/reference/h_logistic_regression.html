<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="
Helper functions used in calculations for logistic regression.">
<title>Helper Functions for Multivariate Logistic Regression — h_logistic_regression • tern</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Helper Functions for Multivariate Logistic Regression — h_logistic_regression">
<meta property="og:description" content="
Helper functions used in calculations for logistic regression.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tern</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/tern.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/missing_values.html">Missing Values in Tern</a>
    <a class="dropdown-item" href="../articles/tables.html">Tabulation</a>
    <a class="dropdown-item" href="../articles/tern_formats.html">Formatting Functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>

<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reports">Reports</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reports">
    <a class="dropdown-item" href="../coverage-report/">Coverage report</a>
    <a class="dropdown-item" href="../unit-test-report/">Unit test report</a>
  </div>
</li>
      <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.10">v0.9.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.9">v0.9.9</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.8.433">v0.9.8.433</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.8">v0.9.8</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.8-rc1">v0.9.8-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.7">v0.9.7</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.6">v0.9.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.5">v0.9.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.4">v0.9.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.3">v0.9.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2">v0.9.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2-rc1">v0.9.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1">v0.9.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1-rc3">v0.9.1-rc3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.0">v0.9.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5">v0.8.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc2">v0.8.5-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc1">v0.8.5-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4">v0.8.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4-rc1">v0.8.4-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc2">v0.8.3-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc1">v0.8.3-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2">v0.8.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc2">v0.8.2-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc1">v0.8.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.1">v0.8.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.0">v0.8.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.10">v0.7.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.9">v0.7.9</a>
</div>
</li>
</ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Helper Functions for Multivariate Logistic Regression</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/tern/blob/HEAD/R/h_logistic_regression.R" class="external-link"><code>R/h_logistic_regression.R</code></a></small>
      <div class="d-none name"><code>h_logistic_regression.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Helper functions used in calculations for logistic regression.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">h_get_interaction_vars</span><span class="op">(</span><span class="va">fit_glm</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_interaction_coef_name</span><span class="op">(</span></span>
<span>  <span class="va">interaction_vars</span>,</span>
<span>  <span class="va">first_var_with_level</span>,</span>
<span>  <span class="va">second_var_with_level</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_or_cat_interaction</span><span class="op">(</span></span>
<span>  <span class="va">odds_ratio_var</span>,</span>
<span>  <span class="va">interaction_var</span>,</span>
<span>  <span class="va">fit_glm</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_or_cont_interaction</span><span class="op">(</span></span>
<span>  <span class="va">odds_ratio_var</span>,</span>
<span>  <span class="va">interaction_var</span>,</span>
<span>  <span class="va">fit_glm</span>,</span>
<span>  at <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_or_interaction</span><span class="op">(</span></span>
<span>  <span class="va">odds_ratio_var</span>,</span>
<span>  <span class="va">interaction_var</span>,</span>
<span>  <span class="va">fit_glm</span>,</span>
<span>  at <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_simple_term_labels</span><span class="op">(</span><span class="va">terms</span>, <span class="va">table</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_interaction_term_labels</span><span class="op">(</span><span class="va">terms1</span>, <span class="va">terms2</span>, <span class="va">table</span>, any <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_glm_simple_term_extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">fit_glm</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_glm_interaction_extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">fit_glm</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_glm_inter_term_extract</span><span class="op">(</span><span class="va">odds_ratio_var</span>, <span class="va">interaction_var</span>, <span class="va">fit_glm</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_logistic_simple_terms</span><span class="op">(</span><span class="va">x</span>, <span class="va">fit_glm</span>, conf_level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_logistic_inter_terms</span><span class="op">(</span><span class="va">x</span>, <span class="va">fit_glm</span>, conf_level <span class="op">=</span> <span class="fl">0.95</span>, at <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h2>
    <dl>
<dt>fit_glm</dt>
<dd><p>(<code>glm</code>)<br> logistic regression model fitted by <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code> with "binomial" family.
Limited functionality is also available for conditional logistic regression models fitted by
<code><a href="https://rdrr.io/pkg/survival/man/clogit.html" class="external-link">survival::clogit()</a></code>, currently this is used only by <code><a href="extract_rsp_biomarkers.html">extract_rsp_biomarkers()</a></code>.</p></dd>


<dt>interaction_vars</dt>
<dd><p>(<code>character</code> of length 2)<br> interaction variable names.</p></dd>


<dt>first_var_with_level</dt>
<dd><p>(<code>character</code> of length 2)<br> the first variable name with
the interaction level.</p></dd>


<dt>second_var_with_level</dt>
<dd><p>(<code>character</code> of length 2)<br> the second variable name with
the interaction level.</p></dd>


<dt>odds_ratio_var</dt>
<dd><p>(<code>string</code>)<br> the odds ratio variable.</p></dd>


<dt>interaction_var</dt>
<dd><p>(<code>string</code>)<br> the interaction variable.</p></dd>


<dt>conf_level</dt>
<dd><p>(<code>proportion</code>)<br> confidence level of the interval.</p></dd>


<dt>at</dt>
<dd><p>(<code>NULL</code> or <code>numeric</code>)<br> optional values for the interaction variable. Otherwise
the median is used.</p></dd>


<dt>terms</dt>
<dd><p>(<code>character</code>)<br> simple terms.</p></dd>


<dt>table</dt>
<dd><p>(<code>table</code>)<br> table containing numbers for terms.</p></dd>


<dt>terms1</dt>
<dd><p>(<code>character</code>)<br> terms for first dimension (rows).</p></dd>


<dt>terms2</dt>
<dd><p>(<code>character</code>)<br> terms for second dimension (rows).</p></dd>


<dt>any</dt>
<dd><p>(<code>flag</code>)<br> whether any of <code>term1</code> and <code>term2</code> can be fulfilled to count the
number of patients. In that case they can only be scalar (strings).</p></dd>


<dt>x</dt>
<dd><p>(<code>string</code> or <code>character</code>)<br> a variable or interaction term in <code>fit_glm</code> (depending on the
helper function).</p></dd>


<dt>...</dt>
<dd><p>additional arguments for the lower level functions.</p></dd>

</dl>
</div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a>
</h2>
    

<p>Vector of names of interaction variables.</p>


<p>Name of coefficient.</p>


<p>Odds ratio.</p>


<p>Odds ratio.</p>


<p>Odds ratio.</p>


<p>Term labels containing numbers of patients.</p>


<p>Term labels containing numbers of patients.</p>


<p>Tabulated main effect results from a logistic regression model.</p>


<p>Tabulated interaction term results from a logistic regression model.</p>


<p>A <code>data.frame</code> of tabulated interaction term results from a logistic regression model.</p>


<p>Tabulated statistics for the given variable(s) from the logistic regression model.</p>


<p>Tabulated statistics for the given variable(s) from the logistic regression model.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
    
<ul>
<li><p><code>h_get_interaction_vars()</code>: Helper function to extract interaction variable names from a fitted
model assuming only one interaction term.</p></li>
<li><p><code>h_interaction_coef_name()</code>: Helper function to get the right coefficient name from the
interaction variable names and the given levels. The main value here is that the order
of first and second variable is checked in the <code>interaction_vars</code> input.</p></li>
<li><p><code>h_or_cat_interaction()</code>: Helper function to calculate the odds ratio estimates
for the case when both the odds ratio and the interaction variable are categorical.</p></li>
<li><p><code>h_or_cont_interaction()</code>: Helper function to calculate the odds ratio estimates
for the case when either the odds ratio or the interaction variable is continuous.</p></li>
<li><p><code>h_or_interaction()</code>: Helper function to calculate the odds ratio estimates
in case of an interaction. This is a wrapper for <code>h_or_cont_interaction()</code> and
<code>h_or_cat_interaction()</code>.</p></li>
<li><p><code>h_simple_term_labels()</code>: Helper function to construct term labels from simple terms and the table
of numbers of patients.</p></li>
<li><p><code>h_interaction_term_labels()</code>: Helper function to construct term labels from interaction terms and the table
of numbers of patients.</p></li>
<li><p><code>h_glm_simple_term_extract()</code>: Helper function to tabulate the main effect
results of a (conditional) logistic regression model.</p></li>
<li><p><code>h_glm_interaction_extract()</code>: Helper function to tabulate the interaction term
results of a logistic regression model.</p></li>
<li><p><code>h_glm_inter_term_extract()</code>: Helper function to tabulate the interaction
results of a logistic regression model. This basically is a wrapper for
<code>h_or_interaction()</code> and <code>h_glm_simple_term_extract()</code> which puts the results
in the right data frame format.</p></li>
<li><p><code>h_logistic_simple_terms()</code>: Helper function to tabulate the results including
odds ratios and confidence intervals of simple terms.</p></li>
<li><p><code>h_logistic_inter_terms()</code>: Helper function to tabulate the results including
odds ratios and confidence intervals of interaction terms.</p></li>
</ul>
</div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
    <p>We don't provide a function for the case when both variables are continuous because
this does not arise in this table, as the treatment arm variable will always be involved
and categorical.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adrs_f</span> <span class="op">&lt;-</span> <span class="va">tern_ex_adrs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"BESRSPI"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">RACE</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASIAN"</span>, <span class="st">"WHITE"</span>, <span class="st">"BLACK OR AFRICAN AMERICAN"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    Response <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">AVALC</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PR"</span>, <span class="st">"CR"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    RACE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RACE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">SEX</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">adrs_f</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/formatters/man/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">tern_ex_adrs</span><span class="op">)</span>, Response <span class="op">=</span> <span class="st">"Response"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod1</span> <span class="op">&lt;-</span> <span class="fu"><a href="fit_logistic.html">fit_logistic</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">adrs_f</span>,</span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    response <span class="op">=</span> <span class="st">"Response"</span>,</span></span>
<span class="r-in"><span>    arm <span class="op">=</span> <span class="st">"ARMCD"</span>,</span></span>
<span class="r-in"><span>    covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"RACE"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>glm.fit: fitted probabilities numerically 0 or 1 occurred</span>
<span class="r-in"><span><span class="va">mod2</span> <span class="op">&lt;-</span> <span class="fu"><a href="fit_logistic.html">fit_logistic</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">adrs_f</span>,</span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    response <span class="op">=</span> <span class="st">"Response"</span>,</span></span>
<span class="r-in"><span>    arm <span class="op">=</span> <span class="st">"ARMCD"</span>,</span></span>
<span class="r-in"><span>    covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"RACE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    interaction <span class="op">=</span> <span class="st">"AGE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>glm.fit: fitted probabilities numerically 0 or 1 occurred</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">h_glm_simple_term_extract</span><span class="op">(</span><span class="st">"AGE"</span>, <span class="va">mod1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable variable_label term term_label interaction interaction_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      AGE            Age  AGE        Age                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   reference reference_label  estimate  std_error df     pvalue</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                           0.1698216 0.09524116  1 0.07457501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   is_variable_summary is_term_summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               FALSE            TRUE</span>
<span class="r-in"><span><span class="fu">h_glm_simple_term_extract</span><span class="op">(</span><span class="st">"ARMCD"</span>, <span class="va">mod1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable   variable_label  term              term_label interaction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    ARMCD Planned Arm Code ARM A Reference ARM A, n = 64            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    ARMCD Planned Arm Code ARM B           ARM B, n = 68            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    ARMCD Planned Arm Code ARM C           ARM C, n = 52            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   interaction_label reference reference_label  estimate std_error df    pvalue</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                  2 0.3004308</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                             -1.774769  1.144405  1 0.1209443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                               17.1922  3626.588  1 0.9962176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   is_variable_summary is_term_summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                TRUE           FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               FALSE            TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               FALSE            TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">h_glm_interaction_extract</span><span class="op">(</span><span class="st">"ARMCD:AGE"</span>, <span class="va">mod2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    variable                        variable_label  term              term_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 ARMCD:AGE Interaction of Planned Arm Code * Age ARM A Reference ARM A, n = 64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 ARMCD:AGE Interaction of Planned Arm Code * Age ARM B           ARM B, n = 68</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 ARMCD:AGE Interaction of Planned Arm Code * Age ARM C           ARM C, n = 52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   interaction interaction_label reference reference_label   estimate std_error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                                          0.3081205 0.2062392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                                         0.02948826  548.5923</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   df    pvalue is_variable_summary is_term_summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2 0.3275837                TRUE           FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  1 0.1351767               FALSE            TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1 0.9999571               FALSE            TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">h_glm_inter_term_extract</span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"ARMCD"</span>, <span class="va">mod2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable variable_label term term_label interaction interaction_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      AGE            Age  AGE        Age                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      AGE            Age  AGE        Age       ARMCD  Planned Arm Code</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      AGE            Age  AGE        Age       ARMCD  Planned Arm Code</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      AGE            Age  AGE        Age       ARMCD  Planned Arm Code</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   reference reference_label    estimate std_error odds_ratio       lcl      ucl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                           -0.03873898 0.1514322         NA        NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     ARM A           ARM A          NA        NA  0.9620018 0.7149514 1.294420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     ARM B           ARM B          NA        NA  1.3091545 1.0021802 1.710157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     ARM C           ARM C          NA        NA  0.9907919 0.0000000      Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   df   pvalue is_variable_summary is_term_summary is_reference_summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 0.798092               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 NA       NA               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 NA       NA               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 NA       NA               FALSE           FALSE                 TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">h_logistic_simple_terms</span><span class="op">(</span><span class="st">"AGE"</span>, <span class="va">mod1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable variable_label term term_label interaction interaction_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      AGE            Age  AGE        Age                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   reference reference_label  estimate  std_error df     pvalue</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                           0.1698216 0.09524116  1 0.07457501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   is_variable_summary is_term_summary odds_ratio       lcl      ucl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               FALSE            TRUE   1.185093 0.9832935 1.428308</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.9832935, 1.4283084</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">h_logistic_inter_terms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"AGE"</span>, <span class="st">"ARMCD"</span>, <span class="st">"AGE:ARMCD"</span><span class="op">)</span>, <span class="va">mod2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        variable                        variable_label                      term</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          RACE                                  Race                     ASIAN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          RACE                                  Race BLACK OR AFRICAN AMERICAN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          RACE                                  Race                     WHITE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        ARMCD                      Planned Arm Code                     ARM A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23        ARMCD                      Planned Arm Code                     ARM B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM B     ARMCD                      Planned Arm Code                     ARM B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33        ARMCD                      Planned Arm Code                     ARM C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM C     ARMCD                      Planned Arm Code                     ARM C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          AGE                                   Age                       AGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21          AGE                                   Age                       AGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31          AGE                                   Age                       AGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           AGE                                   Age                       AGE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    AGE:ARMCD Interaction of Planned Arm Code * Age                     ARM A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    AGE:ARMCD Interaction of Planned Arm Code * Age                     ARM B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32    AGE:ARMCD Interaction of Planned Arm Code * Age                     ARM C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              term_label interaction interaction_label reference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1              Reference ASIAN, n = 110                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BLACK OR AFRICAN AMERICAN, n = 40                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                         WHITE, n = 34                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13              Reference ARM A, n = 64                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23                        ARM B, n = 68                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM B                     ARM B, n = 68         AGE               Age        35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33                        ARM C, n = 52                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM C                     ARM C, n = 52         AGE               Age        35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                  Age                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21                                  Age       ARMCD  Planned Arm Code     ARM A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31                                  Age       ARMCD  Planned Arm Code     ARM B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                   Age       ARMCD  Planned Arm Code     ARM C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12              Reference ARM A, n = 64                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22                        ARM B, n = 68                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32                        ARM C, n = 52                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       reference_label    estimate std_error df     pvalue odds_ratio        lcl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                            2  0.9361139                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                        18.15018  3944.701  1  0.9963288   76299564          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                      -0.3727152  1.025808  1  0.7163522  0.6888614 0.09224926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                           2   0.253914         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23                      -11.52715   6.96188  1 0.09777185         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM B              35          NA        NA NA         NA  0.4757148 0.03361147</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33                       16.33327  20278.39  1  0.9993573         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM C              35          NA        NA NA         NA   34808099          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                    -0.03873898 0.1514322  1   0.798092         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21              ARM A          NA        NA NA         NA  0.9620018  0.7149514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31              ARM B          NA        NA NA         NA   1.309155    1.00218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               ARM C          NA        NA NA         NA  0.9907919          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                          NA         NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22                      0.3081205 0.2062392  1  0.1351767         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32                     0.02948826  548.5923  1  0.9999571         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            ucl is_variable_summary is_term_summary is_reference_summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                             TRUE           FALSE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Inf               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     5.143998               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13          NA                TRUE           FALSE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23          NA               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM B 6.732956               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33          NA               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM C      Inf               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          NA               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21     1.29442               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31    1.710157               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          Inf               FALSE           FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12          NA                TRUE           FALSE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22          NA               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32          NA               FALSE            TRUE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                           ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                     0, Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     0.09224926, 5.14399810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                    NA, NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23                    NA, NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM B 0.03361147, 6.73295611</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33                    NA, NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM C                 0, Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                    NA, NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      0.7149514, 1.2944200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31        1.002180, 1.710157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                     0, Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                    NA, NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22                    NA, NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32                    NA, NA</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="nest">
  <p>tern is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>

  

  

  </body>
</html>
