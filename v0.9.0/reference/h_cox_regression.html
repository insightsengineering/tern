<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Helper functions used in fit_coxreg_univar() and fit_coxreg_multivar()."><title>Helper Functions for Cox Proportional Hazards Regression — h_cox_regression • tern</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Helper Functions for Cox Proportional Hazards Regression — h_cox_regression"><meta property="og:description" content="
Helper functions used in fit_coxreg_univar() and fit_coxreg_multivar()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tern</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/tern.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/missing_values.html">Missing Values in Tern</a>
    <a class="dropdown-item" href="../articles/tables.html">Tabulation</a>
    <a class="dropdown-item" href="../articles/tern_formats.html">Formatting Functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2-rc1">v0.9.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1-rc3">v0.9.1-rc3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc2">v0.8.5-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5-rc1">v0.8.5-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4-rc1">v0.8.4-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc2">v0.8.3-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.3-rc1">v0.8.3-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc2">v0.8.2-rc2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2-rc1">v0.8.2-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.10">v0.7.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.5">v0.9.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.4">v0.9.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.3">v0.9.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.2">v0.9.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.1">v0.9.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.9.0">v0.9.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.5">v0.8.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.4">v0.8.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.2">v0.8.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.1">v0.8.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.8.0">v0.8.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern/v0.7.9">v0.7.9</a> </div></li>
<!-- end dropdown for versions -->
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reports">Reports</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reports">
    <a class="dropdown-item" href="../coverage-report/">Coverage report</a>
    <a class="dropdown-item" href="../unit-test-report/">Unit test report</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Helper Functions for Cox Proportional Hazards Regression</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/tern/blob/HEAD/R/h_cox_regression.R" class="external-link"><code>R/h_cox_regression.R</code></a></small>
      <div class="d-none name"><code>h_cox_regression.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Helper functions used in <code><a href="fit_coxreg.html">fit_coxreg_univar()</a></code> and <code><a href="fit_coxreg.html">fit_coxreg_multivar()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">h_coxreg_univar_formulas</span><span class="op">(</span><span class="va">variables</span>, interaction <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_coxreg_multivar_formula</span><span class="op">(</span><span class="va">variables</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_coxreg_univar_extract</span><span class="op">(</span><span class="va">effect</span>, <span class="va">covar</span>, <span class="va">data</span>, <span class="va">mod</span>, control <span class="op">=</span> <span class="fu"><a href="control_coxreg.html">control_coxreg</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">h_coxreg_multivar_extract</span><span class="op">(</span><span class="va">var</span>, <span class="va">data</span>, <span class="va">mod</span>, control <span class="op">=</span> <span class="fu"><a href="control_coxreg.html">control_coxreg</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>variables</dt>
<dd><p>(named <code>list</code> of <code>string</code>)<br> list of additional analysis variables.</p></dd>


<dt>interaction</dt>
<dd><p>(<code>flag</code>)<br> if <code>TRUE</code>, the model includes the interaction between the studied
treatment and candidate covariate. Note that for univariate models without treatment arm, and
multivariate models, no interaction can be used so that this needs to be <code>FALSE</code>.</p></dd>


<dt>effect</dt>
<dd><p>(<code>string</code>)<br> the treatment variable.</p></dd>


<dt>covar</dt>
<dd><p>(<code>string</code>)<br> the name of the covariate in the model.</p></dd>


<dt>data</dt>
<dd><p>(<code>data.frame</code>)<br> the dataset containing the variables to summarize.</p></dd>


<dt>mod</dt>
<dd><p>(<code>coxph</code>)<br> Cox regression model fitted by <code><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">survival::coxph()</a></code>.</p></dd>


<dt>control</dt>
<dd><p>(<code>list</code>)<br> a list of controls as returned by <code><a href="control_coxreg.html">control_coxreg()</a></code>.</p></dd>


<dt>var</dt>
<dd><p>(<code>string</code>)<br> single variable name that is passed by <code>rtables</code> when requested
by a statistics function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<ul><li><p><code>h_coxreg_univar_formulas()</code> returns a <code>character</code> vector coercible into formulas (e.g <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">stats::as.formula()</a></code>).</p></li>
</ul><ul><li><p><code>h_coxreg_multivar_formula()</code> returns a <code>string</code> coercible into a formula (e.g <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">stats::as.formula()</a></code>).</p></li>
</ul><ul><li><p><code>h_coxreg_univar_extract()</code> returns a <code>data.frame</code> with variables <code>effect</code>, <code>term</code>, <code>term_label</code>, <code>level</code>,
<code>n</code>, <code>hr</code>, <code>lcl</code>, <code>ucl</code>, and <code>pval</code>.</p></li>
</ul><ul><li><p><code>h_coxreg_multivar_extract()</code> returns a <code>data.frame</code> with variables <code>pval</code>, <code>hr</code>, <code>lcl</code>, <code>ucl</code>, <code>level</code>,
<code>n</code>, <code>term</code>, and <code>term_label</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>h_coxreg_univar_formulas()</code>: Helper for Cox regression formula. Creates a list of formulas. It is used
internally by <code><a href="fit_coxreg.html">fit_coxreg_univar()</a></code> for the comparison of univariate Cox regression models.</p></li>
<li><p><code>h_coxreg_multivar_formula()</code>: Helper for multivariate Cox regression formula. Creates a formulas
string. It is used internally by <code><a href="fit_coxreg.html">fit_coxreg_multivar()</a></code> for the comparison of multivariate Cox
regression models. Interactions will not be included in multivariate Cox regression model.</p></li>
<li><p><code>h_coxreg_univar_extract()</code>: Utility function to help tabulate the result of
a univariate Cox regression model.</p></li>
<li><p><code>h_coxreg_multivar_extract()</code>: Tabulation of multivariate Cox regressions. Utility function to help
tabulate the result of a multivariate Cox regression model for a treatment/covariate variable.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="cox_regression.html">cox_regression</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># `h_coxreg_univar_formulas`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simple formulas.</span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_univar_formulas</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"time"</span>, event <span class="op">=</span> <span class="st">"status"</span>, arm <span class="op">=</span> <span class="st">"armcd"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        ref </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     "survival::Surv(time, status) ~ armcd" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                          X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ armcd + X" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                          y </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ armcd + y" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Addition of an optional strata.</span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_univar_formulas</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"time"</span>, event <span class="op">=</span> <span class="st">"status"</span>, arm <span class="op">=</span> <span class="st">"armcd"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"y"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    strata <span class="op">=</span> <span class="st">"SITE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       ref </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     "survival::Surv(time, status) ~ armcd + strata(SITE)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                         X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ armcd + X + strata(SITE)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                         y </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ armcd + y + strata(SITE)" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Inclusion of the interaction term.</span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_univar_formulas</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"time"</span>, event <span class="op">=</span> <span class="st">"status"</span>, arm <span class="op">=</span> <span class="st">"armcd"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"y"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    strata <span class="op">=</span> <span class="st">"SITE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  interaction <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       ref </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     "survival::Surv(time, status) ~ armcd + strata(SITE)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                         X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ armcd * X + strata(SITE)" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                         y </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ armcd * y + strata(SITE)" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only covariates fitted in separate models.</span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_univar_formulas</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"time"</span>, event <span class="op">=</span> <span class="st">"status"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      X                                      y </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "survival::Surv(time, status) ~ 1 + X" "survival::Surv(time, status) ~ 1 + y" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `h_coxreg_multivar_formula`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_multivar_formula</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"AVAL"</span>, event <span class="op">=</span> <span class="st">"event"</span>, arm <span class="op">=</span> <span class="st">"ARMCD"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"AGE"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "survival::Surv(AVAL, event) ~ ARMCD + RACE + AGE"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Addition of an optional strata.</span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_multivar_formula</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"AVAL"</span>, event <span class="op">=</span> <span class="st">"event"</span>, arm <span class="op">=</span> <span class="st">"ARMCD"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"AGE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    strata <span class="op">=</span> <span class="st">"SITE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "survival::Surv(AVAL, event) ~ ARMCD + RACE + AGE + strata(SITE)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example without treatment arm.</span></span></span>
<span class="r-in"><span><span class="fu">h_coxreg_multivar_formula</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    time <span class="op">=</span> <span class="st">"AVAL"</span>, event <span class="op">=</span> <span class="st">"event"</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"AGE"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    strata <span class="op">=</span> <span class="st">"SITE"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "survival::Surv(AVAL, event) ~ 1 + RACE + AGE + strata(SITE)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dta_simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  armcd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  var1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">75</span>, <span class="fl">55</span>, <span class="fl">65</span>, <span class="fl">85</span>, <span class="fl">75</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  var2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"U"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">armcd</span> <span class="op">+</span> <span class="va">var1</span>, data <span class="op">=</span> <span class="va">dta_simple</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">h_coxreg_univar_extract</span><span class="op">(</span></span></span>
<span class="r-in"><span>  effect <span class="op">=</span> <span class="st">"armcd"</span>, covar <span class="op">=</span> <span class="st">"armcd"</span>, mod <span class="op">=</span> <span class="va">mod</span>, data <span class="op">=</span> <span class="va">dta_simple</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       effect  term       term_label level n       hr       lcl      ucl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Treatment: armcd B vs control (A)     B 8 6.551448 0.4606904 93.16769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       pval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.165209</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">armcd</span> <span class="op">+</span> <span class="va">var1</span>, data <span class="op">=</span> <span class="va">dta_simple</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">h_coxreg_multivar_extract</span><span class="op">(</span></span></span>
<span class="r-in"><span>  var <span class="op">=</span> <span class="st">"var1"</span>, mod <span class="op">=</span> <span class="va">mod</span>, data <span class="op">=</span> <span class="va">dta_simple</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        pval        hr      lcl      ucl level n term term_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.4456195 0.9423284 0.808931 1.097724  var1 8 var1       var1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>tern is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>

  

  

  </body></html>

